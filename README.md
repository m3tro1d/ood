# OOD

## Клонирование репозитория

Для файлов курса используется система Git [Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules). Чтобы
клонировать репозиторий со всеми материалами курса [OOD](https://github.com/alexey-malov/oop), следует использовать
команду:

```shell
git clone git@github.com:m3tro1d/ood.git --recurse-submodules
```

## Обновление материалов курса

```shell
git submodule update --remote
git add -A
git commit -m "Update course submodule"
git push
```

## Сборка

В качестве системы сборки используется CMake. Есть два варианта сборки:

1. Открыть проект в IDE CLion, в первый раз откроется окно с сохраненной в `.idea` конфигурацией сборки.
2. Собрать вручную. Для этого надо создать конфигурацию CMake и собрать проект по сгенерированной конфигурации:

```shell
cmake -G "[Генератор на ваше усмотрение]" . # Например, MinGW Makefiles
cmake --build . {--target [Название цели]} # Опционально указывается один проект, чтобы не собирать все
```

## Сборка под Linux

В корневой директории выполнить:

```shell
./bin/make-image
```

Скрипт создает образ с файлами из директории `docker` на основе gcc 12.2.0 с библиотекой boost.

Сборка проекта CMake через образ:

```shell
./bin/build-target [Название цели]
```

## Очистка артефактов сборки

Если компиляция осуществляется с помощью CLion, все артефакты по умолчанию будут помещены в
директорию `cmake-build-debug` в корне проекта, так что достаточно удалить только эту директорию.

Если запускать чистый CMake, то он заполонит все директории своими файлами. Чтобы быстро избавиться от этих файлов,
можно использовать команду:

```shell
git clean -fXd
```

Ее следует применять осторожно, т.к. могут удалиться игнорируемые Git'ом файлы конфигурации в директории `.idea`.
